<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitch Chat TTS</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js" integrity="sha512-CSBhVREyzHAjAFfBlIBakjoRUKp5h7VSweP0InR/pAJyptH7peuhCsqAI/snV+TwZmXZqoUklpXp6R6wMnYf5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <link href="output.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css" type="text/css">
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Twitch Chat TTS" />
  <meta property="og:description"
    content="Please enter a channel  text to speech." />
  <script>

  
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-JT0GEBW5MK');
  </script>
  <script src="indexdb.js"></script>
  <script type="module" src="./index.js"></script>
  <script src="renderer.js"></script>
</head>

<body class="bg-gray-600">
    <div class="tabs">
      <div class="tab" data-tab="tab1">Tab1 chat</div>
      <div class="tab" data-tab="tab2">Tab2 minecraft</div>
      <div class="tab" data-tab="tab3">Tab3 actions & events</div>
      <div class="tab" data-tab="tab4">Tab4 upload files</div>
      <div class="tab" data-tab="tab5">Tab5 settings</div>
      <div class="indicator"></div>
  </div>

    <div id="tab1" class="tab-content">

      <div class="jumbotron">
        <button id="connect-button" class="btn btn-primary">Connect</button>
        <!-- <div class="grid float-end right-0">
          <div class="card">
            <a href="https://www.tiktok.com/@melserng" >
              <img class="card-img-top" src="images/Rose.webp" alt="Rose">
            </a>
            <div class="card-body">
              <h5 class="card-title">una monedita</h5>
              <p class="card-text">con una rosita me apoyas :D!</p>
            </div>
          </div>
        </div> -->
        <div class="container">
              <h1>TTS de chat de Twitch</h1>
              <p>Ingrese un canal a continuación y luego haga clic en "Comenzar a escuchar" para texto a voz.</p>
                <form action="#">
                  <div class="row">
                    <div class="col-lg-8 col">
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon3">twitch.tv/</span>
                        </div>
                        <input id="channelname" name="channel" type="text" class="form-control" />
                      </div>
                    </div>
                    <div class="col-lg-4 col">
                      <button class="btn btn-primary" id="listenBtn" type="submit"> Start
                        Listening</button>
                    </div>
                  </div>
                </form>
                <div id="status" class="alert alert-info">
                  Esperando el nombre del canal...
                </div>
              <div id="options-container" class="grid grid-cols-2 border-2 gap-2 border-slate-600 rounded-md">
                  <div id="options-voice" class="grid border-2 p-1  gap-4 mx-2 rounded-md">
                    
                    <label for="volume"><small>Speech Volume</small>                    <i class="bi bi-volume-up-fill"></i>
                      <input id="volume" type="range" min="0" max="1" value="1" step="0.1"></label>
                    <label for="voiceSelect"><small>select voz</small><select id="voiceSelect" class="form-control w-2/4"></select></label>
                    
                    <label for="randomVoice"><small>random voice</small><input id="randomVoice" type="checkbox" /></label>
                    <label for="randomSpeed"><small>random speed</small><input id="randomSpeed" type="checkbox" />  <input type="number" id="randomSpeedValue" name="randomSpeedValue" value="1" min="0.1" max="2" step="0.1" />   </label>
                    <label for="randomPitch"><small>random pitch</small><input id="randomPitch" type="checkbox" />                     <input type="number" id="randomPitchValue" name="randomPitchValue" value="1" min="0.1" max="2" step="0.1" />
                    </label>

                </div>
                  <div id="options-users" class="grid border-2 p-1 gap-4 mx-2 rounded-md">
                  <div  >  <label for="modsonly"><small>Limit TTS to Moderators Only</small></label>
                    <input id="modsonly" type="checkbox" data-option="modsonly" /></div>  <div>  <label for="cheersonly"><small>Limit TTS to Cheers Only</small></label>
                    <input id="cheersonly" type="checkbox" data-option="cheersonly" /></div>  <div>  <label for="exclude-toggle"><small>Exclude Chatters Listed Below</small></label>
                    <input id="exclude-toggle" type="checkbox" data-option="exclude-toggle" /></div><div class="row">    <label for="announcechatter"><small>Announce Chatter's Name Before Message</small></label>  
                  <input id="announcechatter" type="checkbox" data-option="announcechatter" /></div>
                <div class="col-12">
                  <textarea name="excluded-chatters" id="excluded-chatters" cols="30" rows="10"></textarea>
                </div>
                <div class="row">
                <audio id="audiotrack"></audio>
              </div>
                </div>
              </div>
              <!---- # esta es una parte de la tab de eventos -->

          </div>
          
    </div>
  </div>
    <div id="tab2" class="tab-content w-full bg-slate-500">
      <div class="grid border-2	p-8 font-bold text-gray-900 border-slate-600 mx-2 rounded-md">

      <form id="createBotForm" class="grid w-3/4 grid-cols-2 border-2	p-2 m-2 border-slate-600 gap-4 mx-2 rounded-md">
        <label for="keyBOT" class="justify-self-start">MinecraftBOT:</label>
        <input type="text" id="keyBOT" name="keyBOT" value="" required>
        <label for="keySERVER" class="justify-self-start">IP del Server:</label>
        <input type="text" id="keySERVER" name="keySERVER" value="localhost:25565" required>
        <label for="keyLOGIN" class="justify-self-start">Chat en el servidor:</label>
        <input type="text" id="keyLOGIN" name="keyLOGIN" value="hola como estan" required>
        <button type="submit" class="border-4	p-2 m-2 border-slate-600 rounded-md">Conectar Bot</button>
        <button id="disconnectButton" class="border-4	p-2 m-2 border-slate-600 rounded-md">Desconectar Bot</button>
      </form>
          <div id="resultMessage"></div>

          <div class="grid w-3/4 grid-cols-2 border-2	p-2 m-2 border-slate-600 gap-4 mx-2 rounded-md">
            <label>Tu Minecraft playerName:</label>
            <input type="text" id="playerNameInput" placeholder="minecraftPlayer" onchange="saveDataminecraft()">

             <label for="eventType"> test Event Type:</label>
              <input type="text" id="eventType" placeholder="Event Type" value="gift" onchange="saveDataminecraft()">
              <label for="data"> test Data :</label> 
              <input type="text" id="data" placeholder="Data Default" onchange="saveDataminecraft()">
              <button onclick="testHandleEvent()">Test Handle Event</button> 
          </div>
          <script>

            addEventListener('load', () => {
              const data = localStorage.getItem('dataminecraft');
              if (data) {
                const dataObj = JSON.parse(data);
                document.getElementById('playerNameInput').value = dataObj.playerName;
                document.getElementById('eventType').value = dataObj.eventType;
                document.getElementById('data').value = dataObj.data;
              }
            });
            function saveDataminecraft() {
              const playerName = document.getElementById('playerNameInput').value;
              const eventType = document.getElementById('eventType').value;
              const data = document.getElementById('data').value;
              localStorage.setItem('dataminecraft', JSON.stringify({ playerName, eventType, data }));
              console.log('Datos guardados en el localStorage', localStorage.getItem('dataminecraft'));
            }
          </script>
          <div class="grid w-full border-2	p-2 m-2 border-slate-600 gap-4 mx-2 rounded-md">
            <h1>Gift List</h1>
            <input type="text" id="gifts-title" placeholder="Gift Title">
            <textarea id="gifts-description" placeholder="Gift Description"></textarea>
            <button onclick="addEvent('gifts')">Add Gift</button>
            <ul id="gifts-list"></ul>
          <h1>chat List</h1>
          <input type="text" id="chat-title" placeholder="chat Title">
          <textarea id="chat-description" placeholder="Comment Description"></textarea>
          <button onclick="addEvent('chat')">Add chat</button>
          <ul id="chat-list"></ul>
        
          <h1>follows List</h1>
          <input type="text" id="follows-title" placeholder="follows Title">
          <textarea id="follows-description" placeholder="follows Description"></textarea>
          <button onclick="addEvent('follows')">Add follows</button>
          <ul id="follows-list"></ul>
        
          <h1>Subscribe List</h1>
          <input type="text" id="subscribes-title" placeholder="Subscribe Title">
          <textarea id="subscribes-description" placeholder="Subscribe Description"></textarea>
          <button onclick="addEvent('subscribes')">Add Subscribe</button>
          <ul id="subscribes-list"></ul>
          </div>
          </div>
          <script>
            if (localStorage.getItem('botFormData')) {
              const formData = JSON.parse(localStorage.getItem('botFormData'));
              keyBOTInput = document.getElementById('keyBOT');
              keySERVERInput = document.getElementById('keySERVER');
              keyLOGINInput = document.getElementById('keyLOGIN');
              keyBOTInput.value = formData.keyBOT;
              keySERVERInput.value = formData.keySERVER;
              keyLOGINInput.value = formData.keyLOGIN;
            }
            const createformData = document.getElementById('createBotForm').addEventListener('change', function(event) {
              event.preventDefault();
              const keyBOT = document.getElementById('keyBOT').value.trim();
              const keySERVER = document.getElementById('keySERVER').value.trim();
              const keyLOGIN = document.getElementById('keyLOGIN').value.trim();
              localStorage.setItem('botFormData', JSON.stringify({ keyBOT, keySERVER, keyLOGIN }));
              console.log('Datos guardados en el localStorage', localStorage.getItem('botFormData'));

            });
            
          </script>
    </div>
    <div id="tab3" class="tab-content">
      <h1>Actions & Events      </h1>
      <p>
Aquí puede definir sus acciones y eventos personalizados (desencadenantes).Por ejemplo, puede mostrar un video o animación en cierto regalo.
Para esto primero debe definir la acción y luego el evento.Se requiere la superposición de mis acciones para OBS/Live Studio.
Mire este video para aprender cómo funciona las acciones y el sistema de eventos.
      </p>
      <div class="actions-container grid w-full border-2	p-2 m-2 border-slate-600 gap-4 mx-2 rounded-md">
        <h2>Actions</h2>
        <p>
¿Qué es lo que desea que suceda?Aquí puede crear nuevas acciones y editar las existentes.
Puede vincular estas acciones a los eventos a continuación.
        </p>
        <button id="createActionandOpenModal">Crear nueva acción</button>
        <script>
          const createActionandOpenModal = document.getElementById('createActionandOpenModal');
          createActionandOpenModal.addEventListener('click', () => {
            console.log('createActionandOpenModal');
          }); 
          function openactioneventModal() {
          }
          function createactioneventmodal() {
          }
        </script>
        <table class="table" id="actions-table">
          <td>atajos</td>
          <td>nombre</td>
          <td>duración</td>
          <td>imagen</td>
          <td>video</td>
          <td>sonido</td>
        </table>
        </div>
      <div class="events-container grid w-full border-2	p-2 m-2 border-slate-600 gap-4 mx-2 rounded-md">
        <h2>Events</h2>
        <p>Aquí puede definir qué activará sus acciones.
          </p>
          <button>Crear nuevo evento</button>
          <table class="table" id="events-table">
            <td>atajos</td>
            <td>activo</td>
            <td>evento</td>
            <td>trigger</td>
            <td>actions</td>
          </table>
      </div>
  </div>
  <div id="tab4" class="tab-content">
      <h1>subir archivos</h1>
      <div class="file-container" id="drop-area">
        <ul id="file-list"> </ul>        

    </div>


  <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="settingsModalLabel">Browser Source Export</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>A continuación se muestra una URL que puede colocar como fuente del navegador en OBS. Esta URL aplicará automáticamente el nombre de su canal y comenzará a escuchar mensajes.</p><p>Tenga en cuenta que solo Amazon Polly es compatible como fuente de navegador para OBS y que los usuarios del chat excluidos no funcionan (todavía)..</p>
          <div class="row">
            <div class="col-8">
            <input id="settingsURL" class="form-control" value="" disabled />
          </div>
          <div class="col-4">
            <button class="btn btn-outline-dark" onclick="copyURL()">Copy URL</button>
          </div>
         </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
  </div>
  <div id="tab5" class="tab-content">
    <h1>mensajes y eventos</h1>
    <div class="container" id="main">
      <div id="messages"></div>
    </div>
    <div class="OverlayEvent grid w-full border-2 p-2 m-2 border-slate-600 gap-4 mx-2 rounded-md" id="OverlayEvent">

    <div class="actionevent grid w-full border-2 p-2 m-2 border-slate-600 gap-4 mx-2 rounded-md" id="actionevent">
      <div id="testsection">
        <input type="text" id="testInput" placeholder="Event Name" />
        <button id="testButton_actionevent" class="btn btn-primary">Test</button>
      </div>

          <!-- Modulo tab 5 Apartado Modal, tab5 Action -->
    <div id="tab5-action"></div>
    <!-- Modulo tab 5 Apartado Modal, tab5 Action -->
    

    <button id="openaction" >openaction</button>
    <button id="closeaction" >close</button>
    <div id="tab5-event"></div> 
    <button id="openevent" >openevent</button>
    <button id="closeevent" >close</button>
    <div id="tab5overlay" ></div>
    <button id="openoverlay" >openoverlay</button>
    <button id="closeoverlay" >closeoverlay</button>
    <script type="module" src="./index.js"></script>
    </div>
    <!-- creamos un script donde al estar checked se muestran mas espacios y elementos para modalactions -->
    </div>
    <script>
      // funciones de testeo para acciones y eventos
      let actionEvents = ['chat', 'bits', 'sub', 'resub', 'logon'];
      const actionselect = document.getElementById('actionselect');

      function switchActionEvent(action, event) {
        switch (action) {
          case 'chat':
            switch (event) {  
              case 'bits':
                console.log('bits', action,event);
                break;
              case 'comment':
                console.log('comment', action,event);
                break;  
              case 'like':  
                console.log('like', action,event);
                break;
              case 'subscribe':
                console.log('subscribe', action,event); 
                break;
              case 'subgift':
                console.log('subgift', action,event);
                break;
              case 'submysterygift':
                console.log('submysterygift', action,event);
                break;
              case 'sub':
                console.log('sub', action,event);
                break;
              case 'resub':
                console.log('resub', action,event);
                break;
              case 'gift':
                console.log('gift', action,event);
                break;
              case 'giftpaidupgrade':
                console.log('giftpaidupgrade', action,event);
                break;
              case 'default':
                console.log('datos', action,event);
                                break;
            }
            break;
            default:
              console.log(' default', action,event);
              break;
          }
          
          
      }
      function testmodaleventwithdata() {
        console.log('testmodaleventwithdata');
      }

    </script>
    </div>
  </div>

  </div>
  <script>
    const triggers = [];
    function selectTrigger(trigger) {
        const triggerselect = document.getElementById('OverlayEventActions')
        for (const t of triggers) {
            triggerselect.options.add(new Option(t.name, t.id));
        }
    }
  </script>

  <!-- gestor de pestañas [tabs] -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const tabs = document.querySelectorAll('.tab');
      const tabContents = document.querySelectorAll('.tab-content');
      const indicator = document.querySelector('.indicator');
  
      function activateTab(tab) {
          const tabId = tab.getAttribute('data-tab');
          const content = document.getElementById(tabId);
  
          // Deactivate all tabs and content
          tabs.forEach(t => t.classList.remove('active'));
          tabContents.forEach(c => c.classList.remove('active'));
  
          // Activate the selected tab and content
          tab.classList.add('active');
          content.classList.add('active');
  
          // Update indicator position and width
          indicator.style.left = `${tab.offsetLeft}px`;
          indicator.style.width = `${tab.offsetWidth}px`;
  
          // Store the last active tab in localStorage
          localStorage.setItem('activeTab', tabId);
      }
  
      // Add event listeners to tabs
      tabs.forEach(tab => {
          tab.addEventListener('click', () => activateTab(tab));
      });
  
      // Check for the last active tab in localStorage
      const lastActiveTab = localStorage.getItem('activeTab');
      if (lastActiveTab) {
          const tab = document.querySelector(`.tab[data-tab="${lastActiveTab}"]`);
          if (tab) {
              activateTab(tab);
          } else {
              activateTab(tabs[0]); // Fallback to the first tab if the stored tab doesn't exist
          }
      } else {
          activateTab(tabs[0]); // Default to the first tab
      }
  });
  
  </script>

</body>
<script src="tmi.min.js"></script>
<script src="app.js" type="module"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>  
</html>
